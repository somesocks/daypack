!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2),o=n(3),c=function(e){return null!==e&&("function"==typeof e||"object"===("undefined"==typeof e?"undefined":r(e)))},u=n(13),a=function(e,t,n){o[e]={pack:t,unpack:n}},s=function(e,t){t=t||u.call(this,e);var n=o[t];if(!n)throw new Error("day-pack: no packer for type "+t+" "+JSON.stringify(e));return n.pack.call(this,e)},f=function(e,t){t=t||u.call(this,e);var n=o[t];if(!n)throw new Error("day-pack: no unpacker for type "+t);return n.unpack.call(this,e)},p=function(e,t){if(c(e)&&e.__daypack)return e;t=t||{};var n={},r={id_key:t.id_key||i.id_key,type_key:t.type_key||i.type_key,serialize:t.serialize||i.serialize};r.pack_cache={},r.store=function(e){n[e[r.id_key]]=e},r.fetch=function(e){return n[e]},r.pack=s.bind(r),r.unpack=f.bind(r);var o=r.pack(e);return{__daypack:!0,options:{id_key:r.id_key,type_key:r.type_key,serialize:r.serialize},result:o,entities:n}},l=function(e){if(!c(e))return e;var t=e.result,n=e.options||{},r=e.entities||{},o={id_key:n.id_key||i.id_key,type_key:n.type_key||i.type_key,serialize:n.serialize||i.serialize};o.unpack_cache={},o.store=function(e){r[e[o.id_key]]=e},o.fetch=function(e){return r[e]},o.pack=s.bind(o),o.unpack=f.bind(o);var u=o.unpack(t);return u};e.exports={config:i,packers:o,type:u,register:a,pack:p,unpack:l}},function(e,t){"use strict";e.exports={id_key:"id",type_key:"class",serialize:!1}},function(e,t,n){"use strict";e.exports={array:n(4),boolean:n(5),date:n(6),null:n(7),number:n(8),object:n(9),regexp:n(10),string:n(11),undefined:n(12)}},function(e,t){"use strict";var n=function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t.call(this,e[r]);return n};e.exports={pack:function e(t){var e=this.pack;return n.call(this,t,e)},unpack:function e(t){var e=this.unpack;return n.call(this,t,e)}}},function(e,t){"use strict";e.exports={pack:function(e){return e},unpack:function(e){return e}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports={pack:function(e){var t=this.type_key,r=this.serialize;if(r){var i;i={},n(i,t,"date"),n(i,"value",e.getTime()),e=i}else e=new Date(e.getTime());return e},unpack:function(e){var t=this.serialize;return t?new Date(e.value):new Date(e.getTime())}}},function(e,t){"use strict";e.exports={pack:function(e){return e},unpack:function(e){return e}}},function(e,t){"use strict";e.exports={pack:function(e){return e},unpack:function(e){return e}}},function(e,t){"use strict";var n=function(e){return"string"==typeof e||e instanceof String},r=function(e,t,n){var r=this.id_key,i=n||{};null!=e[r]&&(i[r]=e[r]);for(var o in e)o!==r&&e.hasOwnProperty(o)&&(i[o]=t.call(this,e[o]));return i};e.exports={pack:function e(t){var e=this.pack,i=this.pack_cache,o=this.store,c=this.id_key;if(n(t[c])){var u=i[t[c]];if(u)return u[c];var a=Object.assign({},t);return i[a[c]]=a,r.call(this,t,e,a),o(a),a[c]}var s=Object.assign({},t);return r.call(this,t,e,s),s},unpack:function e(t){var e=this.unpack,i=this.unpack_cache,o=this.id_key;if(n(t[o])){var c=i[t[o]];if(c)return c;var u=Object.assign({},t);return i[u[o]]=u,r.call(this,t,e,u),u}var a=Object.assign({},t);return r.call(this,t,e,a),a}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports={pack:function(e){var t=this.type_key,r=this.serialize;if(r){var i,o=(i={},n(i,t,"regexp"),n(i,"source",e.source),n(i,"flags",e.flags),n(i,"lastIndex",e.lastIndex),i);return o}var c=new RegExp(e.source,e.flags);return c.lastIndex=e.lastIndex,c},unpack:function(e){var t=this.serialize;if(t){var n=new RegExp(e.source,e.flags);return n.lastIndex=e.lastIndex,n}var r=new RegExp(e.source,e.flags);return r.lastIndex=e.lastIndex,r}}},function(e,t){"use strict";e.exports={pack:function(e){return e},unpack:function e(t){var n=this.fetch,e=this.unpack,r=n(t);return null!=r?e(r):t}}},function(e,t){"use strict";e.exports={pack:function(e){return e},unpack:function(e){return e}}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(e){return"string"==typeof e||e instanceof String},o=function e(t){var o=this.type_key,e="undefined"==typeof t?"undefined":n(t);switch(e){default:case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;case"object":return null===t?"null":r(t)?"array":i(t[o])?t[o].toLowerCase():null!=t.__proto__&&i(t.__proto__.name)?t.__proto__.name.toLowerCase():null!=t.prototype&&i(t.prototype.name)?t.prototype.name.toLowerCase():null!=t.constructor&&i(t.constructor.name)?t.constructor.name.toLowerCase():"object"}};e.exports=o}])});