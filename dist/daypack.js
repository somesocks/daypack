!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){e.exports=t(1)},function(e,r,t){"use strict";var n=t(2),i=n.pack,o=n.unpack,a=n.serialize,u=n.deserialize,c=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.create(e.prototype);return t.entities=r.entities||{},t.type_key=r.type_key||e.TYPE_KEY,t.id_key=r.id_key||e.ID_KEY,t.head=r.head||e.HEAD,t};c.prototype.pack=function(e){var r=this.type_key,t=this.id_key,n=this.head,o=this.entities,a={type_key:r,id_key:t,unpacked:{},packed:o,pack:i},u=i(e,a);return o[n]=u,this},c.prototype.unpack=function(e){var r=this.type_key,t=this.id_key,n=this.head,i=this.entities;e=e||n;var a={type_key:r,id_key:t,unpacked:{},packed:i,unpack:o};return o(e,a)},c.prototype.toObject=function(){var e=this.entities;return Object.assign({},e)},c.prototype.fromObject=function(e){var r=this.entities;return Object.assign(r,e),this},c.prototype.serialize=function(){var e=this.type_key,r=this.id_key,t={type_key:e,id_key:r,serialize:a},n=this.toObject();return a(n,t)},c.prototype.deserialize=function(e){var r=this.type_key,t=this.id_key,n={type_key:r,id_key:t,deserialize:u};return e=u(e,n),this.fromObject(e)},c.prototype.toJSON=function(){var e=this.serialize;return JSON.stringify(e)},c.prototype.fromJSON=function(e){var r=JSON.parse(e);return this.deserialize(r)},c.ID_KEY="id",c.TYPE_KEY="type",c.HEAD="__daypack__",c.pack=function(e){return c().pack(e).serialize()},c.unpack=function(e){return c().deserialize(e).unpack()},c.toJSON=function(e){return c().pack(e).toJSON()},c.fromJSON=function(e){return c().fromJSON(e)},e.exports=c},function(e,r,t){"use strict";var n=t(3),i={array:t(4),boolean:t(5),date:t(6),daypack:t(7),null:t(8),number:t(9),object:t(10),regexp:t(11),string:t(12),undefined:t(13)},o=function(e,r){var t=n(e,r),o=i[t];if(!o)throw new Error("Daypack: no unpacker for type "+t);return o.unpack(e,r)},a=function(e,r){var t=n(e,r),o=i[t];if(!o)throw new Error("Daypack: no packer for type "+t);return o.pack(e,r)},u=function(e,r){var t=n(e,r),o=i[t];if(!o)throw new Error("Daypack: no unpacker for type "+t);return o.serialize(e,r)},c=function(e,r){var t=n(e,r),o=i[t];if(!o)throw new Error("Daypack: no packer for type "+t);return o.deserialize(e,r)};e.exports={pack:a,unpack:o,serialize:u,deserialize:c}},function(e,r){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(e){return"string"==typeof e||e instanceof String},o=function(e,r){var o=r.type_key,a="undefined"==typeof e?"undefined":t(e);switch(a){default:case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return a;case"object":return null===e?"null":n(e)?"array":i(e[o])?e[o].toLowerCase():null!=e.__proto__&&i(e.__proto__.name)?e.__proto__.name.toLowerCase():null!=e.prototype&&i(e.prototype.name)?e.prototype.name.toLowerCase():null!=e.constructor&&i(e.constructor.name)?e.constructor.name.toLowerCase():"object"}};e.exports=o},function(e,r){"use strict";var t=function e(r,t){for(var e=t.pack,n=[],i=0;i<r.length;i++)n[i]=e(r[i],t);return n},n=function e(r,t){for(var e=t.unpack,n=[],i=0;i<r.length;i++)n[i]=e(r[i],t);return n},i=function e(r,t){for(var e=t.serialize,n=[],i=0;i<r.length;i++)n[i]=e(r[i],t);return n},o=function e(r,t){for(var e=t.deserialize,n=[],i=0;i<r.length;i++)n[i]=e(r[i],t);return n};e.exports={pack:t,unpack:n,serialize:i,deserialize:o}},function(e,r){"use strict";var t=function(e,r){return e},n=function(e,r){return e},i=function(e,r){return e},o=function(e,r){return e};e.exports={pack:t,unpack:n,serialize:i,deserialize:o}},function(e,r){"use strict";function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var n=function(e,r){return new Date(e.getTime())},i=function(e,r){return new Date(e.getTime())},o=function(e,r){var n,i=(r.serialize,r.type_key),o=(n={},t(n,i,"date"),t(n,"value",e.getTime()),n);return o},a=function(e,r){var t=(r.deserialize,r.type_key,new Date(e.value));return t};e.exports={pack:n,unpack:i,serialize:o,deserialize:a}},function(e,r){"use strict";var t=function(e,r){var t=(r.unpacked,r.packed),n=e.head;return Object.assign(t,e.entities),e[n]},n=function(e,r){return e};e.exports={pack:t,unpack:n}},function(e,r){"use strict";var t=function(e,r){return e},n=function(e,r){return e},i=function(e,r){return e},o=function(e,r){return e};e.exports={pack:t,unpack:n,serialize:i,deserialize:o}},function(e,r){"use strict";var t=function(e,r){return e},n=function(e,r){return e},i=function(e,r){return e},o=function(e,r){return e};e.exports={pack:t,unpack:n,serialize:i,deserialize:o}},function(e,r){"use strict";var t=function(e){return"string"==typeof e||e instanceof String},n=function e(r,n){var e=n.pack,i=n.packed,o=(n.unpacked,n.id_key),a=r[o];if(t(a)){var u=i[a];if(u)return a;var c={};c[o]=a,i[a]=c;for(var s in r)s!==o&&r.hasOwnProperty(s)&&(c[s]=e(r[s],n));return a}var p={};p[o]=a;for(var f in r)f!==o&&r.hasOwnProperty(f)&&(p[f]=e(r[f],n));return p},i=function e(r,n){var e=n.unpack,i=(n.packed,n.unpacked),o=n.id_key,a=r[o];if(t(a)){var u=i[a];if(u)return u;var c={};c[o]=a,i[a]=c;for(var s in r)s!==o&&r.hasOwnProperty(s)&&(c[s]=e(r[s],n));return c}var p={};for(var f in r)f!==o&&r.hasOwnProperty(f)&&(p[f]=e(r[f],n));return p},o=function e(r,t){var e=t.serialize,n={};for(var i in r)r.hasOwnProperty(i)&&(n[i]=e(r[i],t));return n},a=function e(r,t){var e=t.deserialize,n={};for(var i in r)r.hasOwnProperty(i)&&(n[i]=e(r[i],t));return n};e.exports={pack:n,unpack:i,serialize:o,deserialize:a}},function(e,r){"use strict";function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var n=function(e,r){return RegExp(e.source,e.flags)},i=function(e,r){return RegExp(e.source,e.flags)},o=function(e,r){var n,i=(r.serialize,r.type_key),o=(n={},t(n,i,"regexp"),t(n,"source",e.source),t(n,"flags",e.flags),t(n,"lastIndex",e.lastIndex),n);return o},a=function(e,r){var t=(r.deserialize,r.type_key,new RegExp(e.source,e.flags));return t.lastIndex=e.lastIndex,t};e.exports={pack:n,unpack:i,serialize:o,deserialize:a}},function(e,r){"use strict";var t=function(e,r){return e},n=function e(r,t){var e=t.unpack,n=t.packed,i=(t.unpacked,n[r]);return null!=i?e(i,t):r},i=function(e,r){return e},o=function(e,r){return e};e.exports={pack:t,unpack:n,serialize:i,deserialize:o}},function(e,r){"use strict";var t=function(e,r){return e},n=function(e,r){return e},i=function(e,r){return e},o=function(e,r){return e};e.exports={pack:t,unpack:n,serialize:i,deserialize:o}}])});