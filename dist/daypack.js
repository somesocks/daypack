!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";r(2);var n=r(3),i=n.pack,o=n.unpack,u=n.serialize,c=n.deserialize,a=function t(e){var r=Object.create(t.prototype);return r.entities=e||{},r.type_key=t.TYPE_KEY,r.id_key=t.ID_KEY,r.head=t.HEAD,r};a.prototype.pack=function(t){var e=this.type_key,r=this.id_key,n=this.head,o=this.entities,u={type_key:e,id_key:r,unpacked:{},packed:o,pack:i},c=i(t,u);return o[n]=c,this},a.prototype.unpack=function(t){var e=this.type_key,r=this.id_key,n=this.head,i=this.entities;t=t||n;var u={type_key:e,id_key:r,unpacked:{},packed:i,unpack:o};return o(t,u)},a.prototype.map=function(t,e){var r=this.entities,n=Object.map(r,t,e);return a(n)},a.prototype.filter=function(t,e){var r=this.entities,n=Object.filter(r,t,e);return a(n)},a.prototype.toObject=function(){return this.entities},a.prototype.fromObject=function(t){return this.entities=t,this},a.prototype.serialize=function(){var t=this.type_key,e=this.id_key,r={type_key:t,id_key:e,serialize:u},n=this.toObject();return u(n,r)},a.prototype.deserialize=function(t){var e=this.type_key,r=this.id_key,n={type_key:e,id_key:r,deserialize:c};return t=c(t,n),this.fromObject(t)},a.prototype.toJSON=function(){var t=this.serialize;return JSON.stringify(t)},a.prototype.fromJSON=function(t){var e=JSON.parse(t);return this.deserialize(e)},a.ID_KEY="id",a.TYPE_KEY="class",a.HEAD="__daypack__",a.pack=function(t){return a().pack(t).serialize()},a.unpack=function(t){return a().deserialize(t).unpack()},a.toJSON=function(t){return a().pack(t).toJSON()},a.fromJSON=function(t){return a().fromJSON(t)},t.exports=a},function(t,e,r){!function(e,r){t.exports=r()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var i=[].concat(n(r(2)),n(r(3)),n(r(8)));t.exports=function(t){for(var e=0;e<i.length;e++)i[e](t)}},function(t,e){"use strict";t.exports=[]},function(t,e,r){"use strict";t.exports=[r(4),r(5),r(6),r(7)]},function(t,e){"use strict";function r(){var t={};for(var e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t[e]=this[e]);return t}function n(t){Object.copy&&!t||(Object.copy=function(){return r.call.apply(r,arguments)})}t.exports=n,n()},function(t,e){"use strict";function r(t,e){var r={};for(var n in this)if(Object.prototype.hasOwnProperty.call(this,n)){var i=this[n];t.call(e,i,n,this)&&(r[n]=this[n])}return r}function n(t){Object.filter&&!t||(Object.filter=function(){return r.call.apply(r,arguments)})}t.exports=n,n()},function(t,e){"use strict";function r(t,e){for(var r in this)Object.prototype.hasOwnProperty.call(this,r)&&t.call(e,this[r],r,this)}function n(t){Object.forEach&&!t||(Object.forEach=function(){return r.call.apply(r,arguments)})}t.exports=n,n()},function(t,e){"use strict";function r(t,e){var r={};for(var n in this)if(Object.prototype.hasOwnProperty.call(this,n)){var i=this[n];r[n]=t.call(e,i,n,this)}return r}function n(t){Object.map&&!t||(Object.map=function(){return r.call.apply(r,arguments)})}t.exports=n,n()},function(t,e,r){"use strict";t.exports=[r(9),r(10),r(11),r(12),r(13)]},function(t,e){"use strict";function r(t){var e=this,r=function(r){t.has(r)&&e.delete(r)};return this.forEach(r),this}function n(t){!Set||Set.prototype.complement&&!t||Object.defineProperty(Set.prototype,"complement",{value:r})}t.exports=n,n()},function(t,e){"use strict";function r(t,e){var r=new Set,n=function(n){t.call(e,n)&&r.add(n)};return this.forEach(n),r}function n(t){!Set||Set.filter&&!t||(Set.filter=function(){return r.call.apply(r,arguments)}),!Set||Set.prototype.filter&&!t||Object.defineProperty(Set.prototype,"filter",{value:r})}t.exports=n,n()},function(t,e){"use strict";function r(t){var e=this,r=function(r){t.has(r)||e.delete(r)};return this.forEach(r),this}function n(t){!Set||Set.prototype.intersection&&!t||Object.defineProperty(Set.prototype,"intersection",{value:r})}t.exports=n,n()},function(t,e){"use strict";function r(t,e){var r=new Set,n=function(n){r.add(t.call(e,n))};return this.forEach(n),r}function n(t){!Set||Set.map&&!t||(Set.filter=function(){return r.call.apply(r,arguments)}),!Set||Set.prototype.map&&!t||Object.defineProperty(Set.prototype,"map",{value:r})}t.exports=n,n()},function(t,e){"use strict";function r(t){var e=this,r=function(t){return e.add(t)};return t.forEach(r),this}function n(t){!Set||Set.prototype.union&&!t||Object.defineProperty(Set.prototype,"union",{value:r})}t.exports=n,n()}])})},function(t,e,r){"use strict";var n=r(4),i={array:r(5),boolean:r(6),date:r(7),daypack:r(8),null:r(9),number:r(10),object:r(11),regexp:r(12),string:r(13),undefined:r(14)},o=function(t,e){var r=n(t,e),o=i[r];if(!o)throw new Error("Daypack: no unpacker for type "+r);return o.unpack(t,e)},u=function(t,e){var r=n(t,e),o=i[r];if(!o)throw new Error("Daypack: no packer for type "+r);return o.pack(t,e)},c=function(t,e){var r=n(t,e),o=i[r];if(!o)throw new Error("Daypack: no unpacker for type "+r);return o.serialize(t,e)},a=function(t,e){var r=n(t,e),o=i[r];if(!o)throw new Error("Daypack: no packer for type "+r);return o.deserialize(t,e)};t.exports={pack:u,unpack:o,serialize:c,deserialize:a}},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=function(t){return"string"==typeof t||t instanceof String},o=function(t,e){var o=e.type_key,u="undefined"==typeof t?"undefined":r(t);switch(u){default:case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return u;case"object":return null===t?"null":n(t)?"array":i(t[o])?t[o].toLowerCase():null!=t.__proto__&&i(t.__proto__.name)?t.__proto__.name.toLowerCase():null!=t.prototype&&i(t.prototype.name)?t.prototype.name.toLowerCase():null!=t.constructor&&i(t.constructor.name)?t.constructor.name.toLowerCase():"object"}};t.exports=o},function(t,e){"use strict";var r=function t(e,r){for(var t=r.pack,n=[],i=0;i<e.length;i++)n[i]=t(e[i],r);return n},n=function t(e,r){for(var t=r.unpack,n=[],i=0;i<e.length;i++)n[i]=t(e[i],r);return n},i=function t(e,r){for(var t=r.serialize,n=[],i=0;i<e.length;i++)n[i]=t(e[i],r);return n},o=function t(e,r){for(var t=r.deserialize,n=[],i=0;i<e.length;i++)n[i]=t(e[i],r);return n};t.exports={pack:r,unpack:n,serialize:i,deserialize:o}},function(t,e){"use strict";var r=function(t,e){return t},n=function(t,e){return t},i=function(t,e){return t},o=function(t,e){return t};t.exports={pack:r,unpack:n,serialize:i,deserialize:o}},function(t,e){"use strict";function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n=function(t,e){return new Date(t.getTime())},i=function(t,e){return new Date(t.getTime())},o=function(t,e){var n,i=(e.serialize,e.type_key),o=(n={},r(n,i,"date"),r(n,"value",t.getTime()),n);return o},u=function(t,e){var r=(e.deserialize,e.type_key,new Date(t.value));return r};t.exports={pack:n,unpack:i,serialize:o,deserialize:u}},function(t,e){"use strict";var r=function(t,e){var r=(e.unpacked,e.packed),n=t.head;return Object.assign(r,t.entities),t[n]},n=function(t,e){return t};t.exports={pack:r,unpack:n}},function(t,e){"use strict";var r=function(t,e){return t},n=function(t,e){return t},i=function(t,e){return t},o=function(t,e){return t};t.exports={pack:r,unpack:n,serialize:i,deserialize:o}},function(t,e){"use strict";var r=function(t,e){return t},n=function(t,e){return t},i=function(t,e){return t},o=function(t,e){return t};t.exports={pack:r,unpack:n,serialize:i,deserialize:o}},function(t,e){"use strict";var r=function(t){return"string"==typeof t||t instanceof String},n=function t(e,n){var t=n.pack,i=n.packed,o=(n.unpacked,n.id_key),u=e[o];if(r(u)){var c=i[u];if(c)return u;var a={};a[o]=u,i[u]=a;for(var s in e)s!==o&&e.hasOwnProperty(s)&&(a[s]=t(e[s],n));return u}var p={};p[o]=u;for(var f in e)f!==o&&e.hasOwnProperty(f)&&(p[f]=t(e[f],n));return p},i=function t(e,n){var t=n.unpack,i=(n.packed,n.unpacked),o=n.id_key,u=e[o];if(r(u)){var c=i[u];if(c)return c;var a={};a[o]=u,i[u]=a;for(var s in e)s!==o&&e.hasOwnProperty(s)&&(a[s]=t(e[s],n));return a}var p={};for(var f in e)f!==o&&e.hasOwnProperty(f)&&(p[f]=t(e[f],n));return p},o=function t(e,r){var t=r.serialize,n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],r));return n},u=function t(e,r){var t=r.deserialize,n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],r));return n};t.exports={pack:n,unpack:i,serialize:o,deserialize:u}},function(t,e){"use strict";function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n=function(t,e){return RegExp(t.source,t.flags)},i=function(t,e){return RegExp(t.source,t.flags)},o=function(t,e){var n,i=(e.serialize,e.type_key),o=(n={},r(n,i,"regexp"),r(n,"source",t.source),r(n,"flags",t.flags),r(n,"lastIndex",t.lastIndex),n);return o},u=function(t,e){var r=(e.deserialize,e.type_key,new RegExp(t.source,t.flags));return r.lastIndex=t.lastIndex,r};t.exports={pack:n,unpack:i,serialize:o,deserialize:u}},function(t,e){"use strict";var r=function(t,e){return t},n=function t(e,r){var t=r.unpack,n=r.packed,i=(r.unpacked,n[e]);return null!=i?t(i,r):e},i=function(t,e){return t},o=function(t,e){return t};t.exports={pack:r,unpack:n,serialize:i,deserialize:o}},function(t,e){"use strict";var r=function(t,e){return t},n=function(t,e){return t},i=function(t,e){return t},o=function(t,e){return t};t.exports={pack:r,unpack:n,serialize:i,deserialize:o}}])});